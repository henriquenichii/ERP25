{% extends "base.html" %}

{% block title %}Novo Contrato - Divino Doces Finos ERP{% endblock %}

{% block content %}
    <div id="novo-contrato">
        <h2 class="text-3xl font-bold text-center text-gray-800 mb-6">Gerar Novo Contrato</h2>
        <form id="contrato-form" class="space-y-6">
            
            <!-- SEÇÃO DE DADOS DO CONTRATANTE -->
            <div class="bg-gray-50 p-6 rounded-lg shadow-inner">
                <h3 class="text-xl font-semibold text-gray-800 mb-4">Informações do Contratante</h3>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div class="md:col-span-2">
                        <label for="contratante-nome" class="block text-sm font-medium text-gray-700">Nome Completo</label>
                        <input type="text" id="contratante-nome" name="contratanteNome" required class="input-field">
                    </div>
                    <div>
                        <label for="contratante-rg" class="block text-sm font-medium text-gray-700">RG</label>
                        <input type="text" id="contratante-rg" name="contratanteRg" required class="input-field">
                    </div>
                    <div>
                        <label for="contratante-cpf" class="block text-sm font-medium text-gray-700">CPF</label>
                        <input type="text" id="contratante-cpf" name="contratanteCpf" required class="input-field">
                    </div>
                    <div class="md:col-span-2">
                        <label for="contratante-endereco" class="block text-sm font-medium text-gray-700">Endereço Completo</label>
                        <input type="text" id="contratante-endereco" name="contratanteEndereco" required class="input-field">
                    </div>
                    <div>
                        <label for="contratante-telefone" class="block text-sm font-medium text-gray-700">Telefone</label>
                        <input type="text" id="contratante-telefone" name="contratanteTelefone" required class="input-field">
                    </div>
                    <div>
                        <label for="contratante-email" class="block text-sm font-medium text-gray-700">E-mail</label>
                        <input type="email" id="contratante-email" name="contratanteEmail" class="input-field">
                    </div>
                </div>
            </div>

            <!-- SEÇÃO DE DADOS DO CONTRATADO -->
            <div class="bg-gray-50 p-6 rounded-lg shadow-inner">
                <h3 class="text-xl font-semibold text-gray-800 mb-4">Informações do Contratado (Divino Doces Finos)</h3>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div class="md:col-span-2">
                        <label class="block text-sm font-medium text-gray-700">Nome da Empresa</label>
                        <p id="contratado-nome" class="text-gray-900 mt-1">Divinos Doces Finos</p>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700">CNPJ</label>
                        <p id="contratado-cnpj" class="text-gray-900 mt-1">18.826.801/0001-76</p>
                    </div>
                </div>
            </div>

            <!-- SEÇÃO DE DETALHES DO EVENTO -->
            <div class="bg-gray-50 p-6 rounded-lg shadow-inner">
                <h3 class="text-xl font-semibold text-gray-800 mb-4">Detalhes do Evento</h3>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div>
                        <label for="data-evento-contrato" class="block text-sm font-medium text-gray-700">Data do Evento</label>
                        <input type="date" id="data-evento-contrato" name="dataEvento" required class="input-field">
                    </div>
                    <div>
                        <label for="local-evento" class="block text-sm font-medium text-gray-700">Local do Evento</label>
                        <input type="text" id="local-evento" name="localEvento" required class="input-field">
                    </div>
                    <div class="md:col-span-2">
                        <label for="como-conheceu" class="block text-sm font-medium text-gray-700">Como nos conheceu?</label>
                        <input type="text" id="como-conheceu" name="comoConheceu" class="input-field" placeholder="Ex: INSTAGRAN">
                    </div>
                </div>
            </div>

            <!-- SEÇÃO DE PRODUTOS CONTRATADOS (Tabela Dinâmica) -->
            <div class="bg-gray-50 p-6 rounded-lg shadow-inner">
                <div class="flex justify-between items-center mb-4">
                    <h3 class="text-xl font-semibold text-gray-800">Produtos Contratados</h3>
                    <div class="space-x-2">
                        <button type="button" id="add-product-btn" class="btn-secondary px-4 py-2 text-sm">Adicionar Produto</button>
                    </div>
                </div>
                <div class="overflow-x-auto">
                    <table class="min-w-full divide-y divide-gray-200 mb-4">
                        <thead class="bg-gray-50">
                            <tr>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Quantidade</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Produto</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Valor Unitário</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Valor Total Item</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Ações</th>
                            </tr>
                        </thead>
                        <tbody id="produtos-contratados-table-body" class="bg-white divide-y divide-gray-200">
                            <!-- Linhas de produto serão adicionadas aqui via JavaScript -->
                        </tbody>
                    </table>
                </div>
                <p id="no-products-message" class="text-center text-gray-500 mt-4">Nenhum produto adicionado.</p>
            </div>

            <!-- SEÇÃO DE VALORES E PAGAMENTO -->
            <div class="bg-gray-50 p-6 rounded-lg shadow-inner">
                <h3 class="text-xl font-semibold text-gray-800 mb-4">Valores e Pagamento</h3>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div>
                        <label for="valor-total-contrato" class="block text-sm font-medium text-gray-700">Valor Total do Contrato</label>
                        <input type="text" id="valor-total-contrato" name="valorTotalPedidoContrato" required class="input-field" placeholder="Ex: 1000,00">
                    </div>
                    <div>
                        <label for="forma-pagamento" class="block text-sm font-medium text-gray-700">Forma de Pagamento</label>
                        <select id="forma-pagamento" name="formaPagamento" required class="input-field">
                            <option value="">Selecione...</option>
                            <option value="A vista">À vista</option>
                            <option value="Parcelado">Parcelado</option>
                        </select>
                    </div>
                    <div>
                        <label for="data-pagamento" class="block text-sm font-medium text-gray-700">Data de Pagamento</label>
                        <input type="date" id="data-pagamento" name="dataPagamentoContrato" required class="input-field">
                    </div>
                </div>
            </div>

            <div class="flex justify-end space-x-4">
                <button type="submit" class="btn-primary">Gerar Contrato</button>
            </div>
            <div id="contrato-error" class="text-red-600 text-center mt-4 hidden"></div>
        </form>
    </div>
{% endblock %}